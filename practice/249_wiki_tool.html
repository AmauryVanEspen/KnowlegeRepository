<html>
<textarea id="raw" rows="70" cols="80">
# Created by Jerry Wang on Nov 11, 2014
<p><span style="color: rgb(0,0,0);">创建一个html button，OnClick设置成打开一个external link:</span></p>
<p><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard1.png" /></ac:image></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);">Axure 里assign的external link 传入匿名自执行函数内：</span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard2.png" /></ac:image></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard3.png" /></ac:image></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard4.png" /></ac:image></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);">event type: click</span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard5.png" /></ac:image></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);">event source element: input button</span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard6.png" /></ac:image></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard7.png" /></ac:image></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard8.png" /></ac:image></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard9.png" /></ac:image></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard10.png" /></ac:image></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard11.png" /></ac:image><br /></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);">调用$ax的方法设定navigation target：</span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard12.png" /></ac:image></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);">navigation target设置成external url:</span></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard13.png" /></ac:image></span></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard14.png" /></ac:image></span></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard15.png" /></ac:image></span></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);">fire event:</span></span></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard16.png" /></ac:image><br /></span></span></span></span></span></span></p>
<p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><ac:image><ri:attachment ri:filename="clipboard17.png" /></ac:image><br /></span></span></span></span></span></p>

![clipboard13](https://cloud.githubusercontent.com/assets/5669954/26531936/f0eb0bf6-43f4-11e7-8bcc-3bcf864c47bd.png)
![clipboard14](https://cloud.githubusercontent.com/assets/5669954/26531935/f0e9cb60-43f4-11e7-9d08-90819953b358.png)
![clipboard15](https://cloud.githubusercontent.com/assets/5669954/26531937/f0ec9746-43f4-11e7-8e88-02daafb13e47.png)
![clipboard16](https://cloud.githubusercontent.com/assets/5669954/26531938/f0eee2c6-43f4-11e7-889f-177930322f14.png)
![clipboard17](https://cloud.githubusercontent.com/assets/5669954/26531939/f0f0a8cc-43f4-11e7-8598-5a4fa9e96450.png)
![clipboard1](https://cloud.githubusercontent.com/assets/5669954/26531940/f0f4b8d6-43f4-11e7-8bcf-ef28260d999b.png)
![clipboard2](https://cloud.githubusercontent.com/assets/5669954/26531941/f10c1d1e-43f4-11e7-918b-379bf845edad.png)
![clipboard3](https://cloud.githubusercontent.com/assets/5669954/26531942/f10f218a-43f4-11e7-8f52-c51529f7fa33.png)
![clipboard4](https://cloud.githubusercontent.com/assets/5669954/26531943/f1101a54-43f4-11e7-8ae8-2c7ad2f4c18a.png)
![clipboard5](https://cloud.githubusercontent.com/assets/5669954/26531944/f111a964-43f4-11e7-9404-b7f324d63807.png)
![clipboard6](https://cloud.githubusercontent.com/assets/5669954/26531946/f1147ef0-43f4-11e7-8108-2a1ca390db56.png)
![clipboard7](https://cloud.githubusercontent.com/assets/5669954/26531945/f112513e-43f4-11e7-8bb8-22c080b44dad.png)
![clipboard8](https://cloud.githubusercontent.com/assets/5669954/26531947/f13b6f6a-43f4-11e7-99a1-e4a682523897.png)
![clipboard9](https://cloud.githubusercontent.com/assets/5669954/26531949/f13e843e-43f4-11e7-85ec-bb68f920290f.png)
![clipboard10](https://cloud.githubusercontent.com/assets/5669954/26531951/f13fb110-43f4-11e7-9ae9-e69e05a01421.png)
![clipboard11](https://cloud.githubusercontent.com/assets/5669954/26531948/f13dcb8e-43f4-11e7-8e27-6e9147e8a51f.png)
![clipboard12](https://cloud.githubusercontent.com/assets/5669954/26531950/f13edd62-43f4-11e7-81c4-e30b68a86f34.png)

</textarea>
<textarea id="result" rows="70" cols="80">
At Jerry.
</textarea>
<button onclick="myFunction()">Click me</button>
<script>

function getNodeTobeReplaced(current, parent, newPicUrl ){
	return {
		"current": current,
		"parent": parent,
		"newPicUrl": newPicUrl
	};
}

function getNewPicture(index, picRepository){
	var pictureIndex = index + 1;
	var searchKey = "![clipboard" + pictureIndex + "](";
	var searchKeyLength = searchKey.length;
	var startIndex = picRepository.indexOf(searchKey);
	console.assert( startIndex > -1);
	var currentImage = picRepository.substring(startIndex);
	var endIndex = currentImage.indexOf(")");
	console.assert( endIndex > -1);
	return newPic = currentImage.substring(0, endIndex+1);
}
function myFunction(){
	var source = document.getElementById("raw");
	var html = source.value;
	// Jerry 2017-05-29 14:50PM does not work, a line break is needed here
	var div = document.createElement('div');
	div.innerHTML = html;
	var elements = div.childNodes;
	var r1 = div.getElementsByTagName("ac:image");
	var imageToRemove = [];
	var picRepository = elements[elements.length - 1].data;
	for( var i = 0; i < r1.length; i++){
		var record = getNodeTobeReplaced(r1[i], r1[i].parentNode,
			getNewPicture(i, picRepository));
		imageToRemove.push(record);
	}
	for( var i = 0; i < imageToRemove.length;i++){
		var newNode = document.createElement("div");
		newNode.innerHTML = imageToRemove[i].newPicUrl;
		imageToRemove[i].parent.replaceChild(newNode, imageToRemove[i].current);
	}
	div.removeChild(elements[elements.length - 1]);
	var target = document.getElementById("result");
	target.value = div.innerHTML;
	copyToClipboard(target);
}

function copyToClipboard(node) {
  node.select();

  try {
    var successful = document.execCommand('copy');
    var msg = successful ? 'successful' : 'unsuccessful';
    alert('Copying text command was ' + msg);
  } catch (err) {
    alert('Oops, unable to copy: ' + msg);
  }
}


</script>
</html>